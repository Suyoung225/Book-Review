
<img width="500" alt="스크린샷 2023-07-31 065355" src="https://github.com/Suyoung225/Book-Review/assets/87157566/5534f12d-a5e5-4196-8050-e01eb90dc2de">

# 커널 주소 공간
## code
- 시스템 콜, 인터럽트 처리 코드
- 자원 관리를 위한 코드
- 편리한 서비스 제공을 위한 코드

## data
PCB(Process Control Block): 모든 하드웨어, 프로세스를 관리하기 위한 자료구조를 가짐

## stack
커널 함수를 호출시킨 프로세스별로 별도의 스택을 둠 ex) Process A의 커널 스택, Process B의 커널 스택

# 함수
**사용자 정의 함수**

**라이브러리 함수**

**커널 함수**
- 운영체제의 프로그램의 함수
- 커널 함수의 호출 = 시스템 콜

사용자 정의, 라이브러리 함수: 내 프로세스의 주소 공간 (user mode)
커널 함수: 커널의 주소 공간 (kernel mode)

# 프로세스
## 프로세스의 문맥 (context)
- CPU 수행 상태를 나타내는 하드웨어 문맥
  - program counter
  - 각종 register
- 프로세스의 주소공간
  - code, data, stack
- 프로세스 관련 커널 자료 구조
  - PCB
  - Kernel stack

 ## 프로세스의 상태 (state)
- New
  - 프로세스가 생성중인 상태
- Running
  - CPU를 잡고 instruction을 수행 중인 상태
- Ready
  - CPU를 기다리는 상태
- Blocked (wait, sleep)
  - CPU를 주어도 당장 instruction을 수행할 수 없는 상태
  - Process 자신이 요청한 event가 즉시 만족되지 않아 이를 기다리는 상태 예) 디스크에서 파일 읽어오기
- Terminated
  - 수행이 끝난 상

# 문맥 교환 (Context Switch)
- CPU를 한 프로세스에서 다른 프로세스로 넘겨주는 과정
- CPU를 내어주는 프로세스 상태를 그 프로세스 PCB에 저장
- CPU를 얻는 프로세스 상태를 프로세스 상태를 PCB에서 읽어옴

System call 이나 Interrupt 발생 시 반드시 context switch가 일어나는 것이 아님 <br>

사용자 프로세스 A -> OS 커널 -> 사용자 프로세스 A: Context Switch 아님 <br>
사용자 프로세스 A -> OS 커널 -> 사용자 프로세스 B: Context Switch <br>

결과적으로 다른 사용자 프로세스로 CPU가 넘어갈 때 

하지만 전자의 경우도 context의 일부를 PCB에 저장해야 함, 후자의 경우는 cache memory flush를 해야해서 그 부담이 훨씬 큼
  








